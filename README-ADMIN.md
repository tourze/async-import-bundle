# 异步导入模块后台管理

## 功能概述

为 `async-import-bundle` 创建的完整后台管理界面，提供异步导入任务的管理和监控功能。

## 主要功能

### 1. 导入任务管理 (`AsyncImportTaskCrudController`)

**访问路径**: `/admin/async-import/task`

**主要功能**:
- 查看所有导入任务的状态和进度
- 详细查看任务执行情况
- 支持重试失败的任务
- 取消待处理或正在处理的任务
- 编辑任务配置（如优先级、最大重试次数等）

**字段说明**:
- **基本信息**: 用户ID、文件路径、实体类名
- **状态信息**: 任务状态（待处理/处理中/已完成/失败/已取消）
- **统计信息**: 总行数、已处理数量、成功数、失败数、进度百分比
- **配置信息**: 重试次数、最大重试、优先级、内存使用情况
- **时间信息**: 开始时间、结束时间、错误时间
- **其他**: 导入配置、错误信息、备注

**操作功能**:
- **查看详情**: 查看任务的完整信息
- **重试任务**: 对失败的任务进行重试（自动检查是否可重试）
- **取消任务**: 取消待处理或正在处理的任务
- **编辑任务**: 修改任务配置参数

**过滤器**:
- 按用户ID筛选
- 按实体类名筛选
- 按任务状态筛选
- 按文件类型筛选
- 按创建时间范围筛选
- 按开始/结束时间范围筛选

### 2. 错误日志管理 (`AsyncImportErrorLogCrudController`)

**访问路径**: `/admin/async-import/error-log`

**主要功能**:
- 查看导入过程中的详细错误信息
- 分析失败原因和数据问题
- 只读模式，不支持编辑和删除

**字段说明**:
- **关联信息**: 任务ID、实体类名
- **错误详情**: 错误行号、详细错误信息
- **数据信息**: 原始数据、处理后数据
- **时间信息**: 创建时间

**操作功能**:
- **查看详情**: 查看错误的完整信息和相关数据

**过滤器**:
- 按任务ID筛选
- 按实体类名筛选
- 按行号筛选
- 按错误信息关键词筛选
- 按创建时间范围筛选

## 菜单结构

在后台管理系统中，会出现 **"异步导入"** 主菜单，包含以下子菜单：

1. **导入任务** - 管理异步导入任务
   - 图标: `fas fa-tasks`
   - 描述: 管理异步导入任务，查看导入进度和结果

2. **错误日志** - 查看导入错误日志
   - 图标: `fas fa-exclamation-triangle`
   - 描述: 查看导入过程中的错误记录

## 技术实现细节

### 控制器特性

1. **枚举集成**: 完整支持 `ImportTaskStatus` 和 `ImportFileType` 枚举
2. **字段格式化**: 提供多种数据格式化显示（文件大小、数字千分位、百分比等）
3. **自定义操作**: 实现了重试和取消等业务操作
4. **权限控制**: 通过条件显示控制操作按钮的可见性
5. **依赖注入**: 使用现代化的构造函数依赖注入

### 用户体验优化

1. **状态可视化**: 使用不同颜色的徽章显示任务状态
2. **进度显示**: 实时显示导入进度百分比
3. **智能操作**: 只在合适的状态下显示相应操作按钮
4. **信息预览**: 在列表页显示关键信息摘要
5. **详细查看**: 提供完整的详情页面

### 服务配置

- 控制器自动注册为服务
- AdminMenu 服务自动注册到菜单系统
- 支持完整的依赖注入和自动配置

## 使用建议

1. **监控任务**: 定期查看导入任务的执行情况
2. **处理错误**: 通过错误日志分析和解决数据导入问题
3. **优化性能**: 根据内存使用情况调整批处理大小
4. **管理优先级**: 为重要的导入任务设置更高的优先级

## 扩展说明

后台管理界面已经提供了完整的基础功能，如需添加更多功能，可以：

1. 在控制器中添加更多自定义操作
2. 扩展字段显示和编辑规则
3. 添加更多过滤器和搜索条件
4. 实现批量操作功能
5. 集成图表和统计功能